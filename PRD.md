# 周报生成系统 - 产品需求文档 (PRD)

## 1. 产品概述

### 1.1 产品名称
周报生成系统

### 1.2 产品定义
一个智能化的AI周报生成前端应用，通过上传两份AI领域的周报，利用大语言模型自动合成、整理和生成一份高质量的本周AI周报。

### 1.3 核心价值
- **提高效率**：自动合成多份周报，减少手动整理时间
- **内容优化**：利用AI能力进行内容提炼和优化
- **标准化输出**：生成结构化、专业的周报文档
- **易用性强**：友好的UI界面，一键操作

---

## 2. 产品功能需求

### 2.1 核心功能模块

#### 2.1.1 周报上传功能
**功能描述**：支持用户上传两份AI领域的周报文件

**需求详情**：
- 支持上传文件格式：`.txt`、`.docx`、`.pdf`、`.md`
- 支持拖拽上传和点击选择上传两种方式
- 显示上传进度条
- 上传成功后显示文件名和上传时间
- 支持删除已上传的文件，重新上传
- 文件大小限制：单个文件不超过10MB
- 上传后自动预览文件内容（文本形式）

**交互流程**：
```
用户界面 → 选择/拖拽上传文件 → 文件验证 → 上传 → 预览内容 → 确认
```

#### 2.1.2 AI周报生成功能
**功能描述**：基于上传的两份周报，通过AI模型自动生成合成周报

**需求详情**：
- 调用硅基流动API（Qwen/Qwen3-32B模型）
- 生成内容包括四个部分：
  1. **本周已完成**：总结两份周报中已完成的工作
  2. **本周主要工作进展**：提炼关键工作进展和亮点
  3. **存在问题及风险点**：汇总存在的问题和风险
  4. **下周工作计划**：整合下周的工作计划
- 生成过程显示实时进度（流式输出）
- 支持生成过程中的取消操作
- 生成完成后显示完整的周报内容

**API调用参数**：
- API Key: `sk-cfwozebapbwqyaxcdcscuezdqqdzopiscgtvpsxcunelvvvh`
- 模型: `Qwen/Qwen3-32B`
- 温度: 0.7（平衡创意和准确性）

#### 2.1.3 连续对话功能
**功能描述**：支持用户与AI进行多轮对话，进一步优化和调整周报内容

**需求详情**：
- 生成周报后，显示对话输入框
- 支持用户提出修改建议或追加内容
- 保持对话历史记录
- 每次对话都基于前面的内容进行上下文理解
- 支持清空对话历史，重新开始
- 对话历史显示用户提问和AI回复

**对话场景示例**：
- "请加强第二部分的内容"
- "能否用更专业的语言重新表述？"
- "请补充关于XXX的内容"

#### 2.1.4 一键复制功能
**功能描述**：支持快速复制生成的周报内容

**需求详情**：
- 在周报内容区域显示"复制"按钮
- 点击后复制全部内容到剪贴板
- 显示复制成功提示（Toast提示）
- 支持复制对话中的单条回复
- 支持复制整个对话历史

#### 2.1.5 生成DOCX文档功能
**功能描述**：将最终的周报内容导出为Word文档

**需求详情**：
- 支持导出为`.docx`格式
- 文档包含以下内容：
  - 标题：AI周报 - YYYY年WW周
  - 生成时间
  - 四个主要部分（已完成、进展、问题、计划）
  - 对话历史（可选）
- 文档格式规范：
  - 标题使用标题样式
  - 各部分使用二级标题
  - 内容使用正文样式
  - 适当的段落间距和缩进
- 支持自定义文件名
- 一键下载

---

## 3. 用户界面设计需求

### 3.1 页面布局

#### 3.1.1 主界面布局
```
┌─────────────────────────────────────────────────┐
│         周报生成系统                           │
├─────────────────────────────────────────────────┤
│  左侧面板（40%）      │  右侧面板（60%）        │
│  ┌─────────────────┐  │  ┌─────────────────┐   │
│  │ 上传区域        │  │  │ 预览/结果区域   │   │
│  │ - 文件1上传     │  │  │ - 周报内容      │   │
│  │ - 文件2上传     │  │  │ - 对话区域      │   │
│  │ - 生成按钮      │  │  │ - 操作按钮      │   │
│  └─────────────────┘  │  └─────────────────┘   │
└─────────────────────────────────────────────────┘
```

#### 3.1.2 上传区域
- 两个独立的文件上传框，分别标记为"周报1"和"周报2"
- 支持拖拽上传
- 显示已上传文件的名称、大小、上传时间
- 删除按钮用于移除已上传的文件
- 生成按钮（仅在两个文件都上传后启用）

#### 3.1.3 预览/结果区域
- **上传后预览**：显示上传文件的文本内容（可滚动）
- **生成中**：显示加载动画和进度提示
- **生成完成**：显示结构化的周报内容
  - 各部分使用卡片或分隔符区分
  - 支持展开/收起各部分
- **对话区域**：显示对话历史和输入框

#### 3.1.4 操作按钮区域
- 复制按钮：复制当前周报内容
- 导出按钮：导出为DOCX文档
- 清空按钮：清空所有内容，重新开始
- 对话输入框：输入新的对话内容

### 3.2 交互设计

#### 3.2.1 用户流程
```
1. 打开应用
   ↓
2. 上传周报1 → 预览内容
   ↓
3. 上传周报2 → 预览内容
   ↓
4. 点击"生成周报"
   ↓
5. AI生成周报（流式显示）
   ↓
6. 查看生成的周报内容
   ↓
7. 可选：进行连续对话优化
   ↓
8. 复制内容或导出DOCX
```

#### 3.2.2 反馈设计
- **上传反馈**：进度条、成功/失败提示
- **生成反馈**：加载动画、实时进度、完成提示
- **操作反馈**：Toast提示（复制成功、导出成功等）
- **错误反馈**：清晰的错误信息和解决建议

### 3.3 视觉设计需求
- **配色**：现代化配色，建议使用蓝色系为主色
- **字体**：清晰易读的无衬线字体
- **响应式**：支持不同屏幕尺寸（最小宽度1200px）
- **深色模式**：支持可选的深色主题

---

## 4. 技术需求

### 4.1 前端技术栈
- **框架**：React 18+ 或 Vue 3+
- **UI组件库**：Ant Design / Element Plus / Material-UI
- **HTTP客户端**：axios / fetch
- **文件处理**：
  - 文本文件：原生支持
  - PDF：pdfjs-dist
  - DOCX：docx 库
  - Markdown：marked 库
- **文档导出**：docx 库
- **状态管理**：Redux / Pinia / Zustand（可选）
- **样式**：Tailwind CSS / CSS Modules

### 4.2 API集成
- **API提供商**：硅基流动
- **模型**：Qwen/Qwen3-32B
- **认证方式**：Bearer Token
- **请求方式**：支持流式响应（Server-Sent Events）
- **模型提示词为**：

```
你是一名专业的行政秘书，负责将多份个人周报内容进行合并、提炼、去重，并生成一份统一格式、正式严谨的本周综合周报。

【你的任务】
1. 从我提供的多份周报内容中抽取关键信息。
2. 自动合并语义相同或相似的内容，不允许简单拼接。
3. 自动识别关键成果、进度、问题、风险、亮点和业务价值。
4. 统一专业口径，确保内容正式、行政化、有条理。
5. 按要求输出最终综合周报（纯文本，不使用 Markdown），换行以数字分点。
6. 严格按照输入内容生成周报，可以润色，但是不能杜撰无关内容，输入周报比较少时，输出也应比较少。

【最终输出格式（纯文本，必须严格遵守以下格式）】
本周工作周报
一、本周主要工作进展
（按模块和工作内容分类汇总，不按人员分类）
二、存在问题及风险点
（如无，请写“本周暂无明显风险”）
三、下周工作计划
（按优先级列出，内容需明确、可执行）

【输入格式】
我会提供多份周报，格式如下：
【周报1】 【周报2】
```



### 4.3 浏览器兼容性
- Chrome 90+
- Firefox 88+
- Safari 14+
- Edge 90+

---

## 5. 非功能需求

### 5.1 性能需求
- 页面加载时间：< 3秒
- 文件上传：支持10MB以内文件快速上传
- AI生成：实时流式输出，用户可感知进度
- 响应时间：用户操作反馈 < 200ms

### 5.2 安全需求
- API Key 不在前端代码中硬编码，使用环境变量或后端代理
- 上传文件进行类型和大小验证
- 防止XSS攻击（对用户输入进行转义）
- HTTPS传输

### 5.3 可用性需求
- 清晰的错误提示和帮助文档
- 支持键盘快捷键（Ctrl+C复制等）
- 无障碍设计（WCAG 2.1 AA标准）

### 5.4 可维护性需求
- 代码结构清晰，易于扩展
- 完整的代码注释和文档
- 单元测试覆盖率 > 80%

---

## 6. 数据流设计

### 6.1 数据流图
```
用户上传文件
    ↓
文件验证 & 解析
    ↓
提取文本内容
    ↓
构建AI提示词
    ↓
调用硅基流动API
    ↓
流式接收AI响应
    ↓
实时显示周报内容
    ↓
用户可进行对话优化
    ↓
导出为DOCX或复制
```

### 6.2 API请求示例

**请求体**：
```json
{
  "model": "Qwen/Qwen3-32B",
  "messages": [
    {
      "role": "system",
      "content": "你是一个专业的AI周报编辑，擅长整合和优化周报内容。"
    },
    {
      "role": "user",
      "content": "请基于以下两份周报，生成一份综合的AI周报...\n\n周报1:\n...\n\n周报2:\n..."
    }
  ],
  "temperature": 0.7,
  "stream": true
}
```

**响应**：流式JSON格式，包含生成的文本片段

---

## 7. 项目里程碑

### 第一阶段：基础功能（Week 1-2）
- [ ] 项目初始化和环境搭建
- [ ] 上传功能实现
- [ ] 文件预览功能
- [ ] 基础UI框架

### 第二阶段：核心功能（Week 3-4）
- [ ] API集成和调试
- [ ] AI周报生成功能
- [ ] 流式响应处理
- [ ] 周报内容展示

### 第三阶段：增强功能（Week 5）
- [ ] 连续对话功能
- [ ] 一键复制功能
- [ ] DOCX导出功能
- [ ] 样式优化

### 第四阶段：测试和优化（Week 6）
- [ ] 功能测试
- [ ] 性能优化
- [ ] 用户体验优化
- [ ] 文档完善

---

## 8. 成功指标

- ✅ 用户能够成功上传两份周报
- ✅ AI能够生成结构化的周报内容
- ✅ 用户可以通过对话优化周报
- ✅ 一键复制和导出功能正常工作
- ✅ 页面加载和操作响应流畅
- ✅ 用户满意度 > 4.5/5

---

## 9. 附录

### 9.1 周报模板示例

**生成的周报结构**：
```
# AI周报 - 2024年第48周

## 本周已完成
- 完成项目A的开发
- 修复了B个关键bug
- 完成了C项测试工作

## 本周主要工作进展
- 推进了XXX功能的实现
- 优化了YYY的性能
- 完成了ZZZ的集成

## 存在问题及风险点
- 问题1：描述
- 问题2：描述
- 风险1：描述

## 下周工作计划
- 计划1：具体内容
- 计划2：具体内容
- 计划3：具体内容
```

### 9.2 常见问题

**Q: 支持哪些文件格式？**
A: 支持 .txt、.docx、.pdf、.md 格式

**Q: 文件大小有限制吗？**
A: 单个文件不超过10MB

**Q: 生成的周报可以修改吗？**
A: 可以通过连续对话功能进行修改和优化

**Q: 导出的DOCX文档格式如何？**
A: 包含标题、四个主要部分和对话历史，格式规范专业

---

**文档版本**：v1.0
**最后更新**：2024年11月24日
**作者**：产品团队
